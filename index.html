<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>äº‰é”‹å¤©ä¸‹ - æ–°å·å¼€å±€ç‰ˆ</title>
<style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:"Microsoft YaHei", "å®‹ä½“", sans-serif;}
    body{background:#E6E6E6;font-size:14px;color:#000;max-width:600px;margin:0 auto;padding:10px;}
    .header{background:#fff;border:1px solid #666;padding:8px;margin-bottom:10px;border-radius:4px;}
    .title{text-align:center;font-weight:bold;color:#900;font-size:18px;margin-bottom:5px;}
    .notice{color:#003399;margin:5px 0;padding:3px;border-bottom:1px solid #DDD;cursor:pointer;}
    .notice:hover{background:#f5f5f5;}
    .info{border:1px solid #666;background:#fff;padding:8px;margin:8px 0;line-height:1.8;border-radius:4px;}
    .menu{border:1px solid #666;background:#fff;padding:5px;margin:8px 0;border-radius:4px;}
    .item{display:block;padding:8px 5px;color:#003399;text-decoration:none;border-bottom:1px solid #DDD;cursor:pointer;}
    .item:last-child{border-bottom:none;}
    .item:hover{background:#f0f8ff;}
    .page{display:none;padding:5px;}
    .page.show{display:block;}
    .chat-item{margin:5px 0;line-height:1.6;padding:3px;background:#f9f9f9;border-radius:3px;}
    .time{color:#666;font-size:12px;margin-right:5px;}
    .bold{font-weight:bold;}
    .blue{color:#003399;}
    .red{color:#900;}
    .btn-reset{margin:10px 0;padding:8px 15px;background:#900;color:#fff;border:none;border-radius:4px;cursor:pointer;}
    .btn-reset:hover{background:#c00;}
</style>
</head>
<body>

<div class="header">
    <div class="title">äº‰é”‹å¤©ä¸‹ - æ–°å·å¼€å±€ç‰ˆ</div>
    <div class="notice" onclick="alert('å®˜æ–¹å…¬å‘Šï¼šæ¬¢è¿æ–°ä¸»å…¬ï¼æ–°æ‰‹ç¦åˆ©ï¼šé¦–æ¬¡æ”»åŸåŒå€æˆ˜åŠŸï¼')">äº‰é”‹å¤©ä¸‹å…¬å‘Š</div>
    <div class="notice" onclick="alert('å¤å¢“è¿·åŸæš‚æœªå¼€æ”¾ï¼Œæ•¬è¯·æœŸå¾…ï¼')">å¤å¢“è¿·åŸ</div>
    <div class="notice" onclick="alert('æš‚æ— æœªè¯»çŸ­ä¿¡ï¼Œä¸»å…¬å¯ä¸“æ³¨éœ¸ä¸šï¼')">æ‚¨æœ‰0æ¡æœªè¯»çŸ­ä¿¡</div>
</div>

<!-- ç©å®¶ä¿¡æ¯ -->
<div class="info" id="playerInfo">
</div>

<!-- è¯¸ä¾¯æ’è¡Œ -->
<div class="info" id="rankBox">
</div>

<!-- å†›æƒ… -->
<div class="info">
    <span class="bold red">ã€å†›æƒ…ã€‘</span><br>
    <span id="military">ç³»ç»Ÿï¼šæ¬¢è¿æ¥åˆ°äº‰é”‹å¤©ä¸‹ï¼Œå¼€å§‹ä½ çš„éœ¸ä¸šï¼æ–°æ‰‹æç¤ºï¼šå…ˆå‡çº§ä¸»åŸæå‡å±æ€§ï¼</span>
</div>

<!-- åƒé‡Œä¼ éŸ³ -->
<div class="info">
    <span class="bold blue">ã€åƒé‡Œä¼ éŸ³ã€‘</span><br>
    <div id="chatBox" style="max-height:150px;overflow-y:auto;margin:5px 0;"></div>
    <div class="item" onclick="sendMsg()">æˆ‘ä¹Ÿæœ‰è¯æƒ³è¯´</div>
</div>

<!-- é‡ç½®æ•°æ®æŒ‰é’® -->
<button class="btn-reset" onclick="resetGame()">é‡ç½®æ¸¸æˆæ•°æ®</button>

<!-- èœå• -->
<div class="menu">
    <div class="item" onclick="showPage('main')">ğŸ¯ ä¸»åŸ</div>
    <div class="item" onclick="showPage('hero')">ğŸ† ç‚¹å°†å¤§å¸</div>
    <div class="item" onclick="showPage('battle')">âš”ï¸ å¾æˆ˜</div>
    <div class="item" onclick="showPage('rob')">ğŸ’° æ å¤º</div>
    <div class="item" onclick="showPage('union')">ğŸ¤ è”ç›Ÿ</div>
    <div class="item" onclick="showPage('rankPage')">ğŸ“Š æ’è¡Œ</div>
</div>

<!-- ä¸»åŸ -->
<div id="main" class="page show">
    <div class="info">ğŸ¯ ä¸»åŸ - ${player.city || 'æ–°æ‰‹æ‘'}</div>
    <div class="item" onclick="zhaobing()">ğŸ“¢ å¾å…µï¼ˆæ¶ˆè€—500ç²® | å…µåŠ›+50ï¼‰</div>
    <div class="item" onclick="shengji()">ğŸ° å‡çº§ä¸»åŸï¼ˆæ¶ˆè€—1000é“¶ | å…¨å±æ€§æå‡ï¼‰</div>
    <div class="item" onclick="lingqu()">ğŸ é¢†å–ç¦»çº¿èµ„æºï¼ˆå…è´¹ | ç²®+500 é“¶+300ï¼‰</div>
    <div class="item" onclick="huifu()">â¤ï¸ æ¢å¤ä½“åŠ›ï¼ˆæ¶ˆè€—100é“¶ | ä½“åŠ›å›æ»¡ï¼‰</div>
</div>

<!-- ç‚¹å°†å¤§å¸ -->
<div id="hero" class="page">
    <div class="info">ğŸ† ç‚¹å°†å¤§å¸</div>
    <div class="item" onclick="zhaomu()">ğŸ¯ æ‹›å‹Ÿæ­¦å°†ï¼ˆæ¶ˆè€—800é“¶ | è§£é”åå°†ï¼‰</div>
    <div class="item" onclick="peiyang()">âš¡ åŸ¹å…»æ­¦å°†ï¼ˆæ¶ˆè€—500é“¶ | æ”»å‡»+150ï¼‰</div>
    <div class="item" onclick="alert(`å½“å‰æ­¦å°†ï¼š${player.hero} | æ”»å‡»åŠ æˆï¼š${player.hero === 'åå°†' ? '200' : '0'}`)">ğŸ‘¨â€âœˆï¸ æŸ¥çœ‹æ­¦å°†</div>
</div>

<!-- å¾æˆ˜ -->
<div id="battle" class="page">
    <div class="info">âš”ï¸ å¾æˆ˜å››æ–¹</div>
    <div class="item" onclick="gongcheng()">ğŸ´ æ”»æ‰“å°åŸï¼ˆæ¶ˆè€—30ä½“åŠ› | è§£é”å°åŸï¼‰</div>
    <div class="item" onclick="alert('å½“å‰å¯æ”»ï¼šå°åŸ | ä¸‹ä¸€ç›®æ ‡ï¼šå¿åŸï¼ˆéœ€ç­‰çº§5ï¼‰')">ğŸ—ºï¸ æ”»åŸåˆ—è¡¨</div>
    <div class="item" onclick="alert(`æˆ˜åŠŸ+50 | ç´¯è®¡æˆ˜åŠŸï¼š${player.gong}`)">ğŸ–ï¸ é¢†å–å¾æˆ˜å¥–åŠ±</div>
</div>

<!-- æ å¤º -->
<div id="rob" class="page">
    <div class="info">ğŸ’° æ å¤ºç©å®¶ï¼ˆäººæœºï¼‰</div>
    <div class="item" onclick="zhencha()">ğŸ” ä¾¦æŸ¥ç©å®¶ï¼ˆå…è´¹ | æŸ¥çœ‹ç›®æ ‡ä¿¡æ¯ï¼‰</div>
    <div class="item" onclick="duoluo()">ğŸ´â€â˜ ï¸ æ å¤ºç©å®¶ï¼ˆæ¶ˆè€—20ä½“åŠ› | æŠ¢é“¶ä¸¤ï¼‰</div>
    <div class="item" onclick="alert(`ä»Šæ—¥æ å¤ºæ¬¡æ•°ï¼š5/5 | å‰©ä½™æ¬¡æ•°ï¼š5`)">ğŸ“ ä»Šæ—¥æ¬¡æ•°</div>
</div>

<!-- è”ç›Ÿ -->
<div id="union" class="page">
    <div class="info">ğŸ¤ è”ç›Ÿ</div>
    <div class="item" onclick="alert('åˆ›å»ºè”ç›Ÿéœ€è¦2000é“¶ä¸¤ | è”ç›Ÿç­‰çº§1å¯è§£é”ç§‘æŠ€')">ğŸ—ï¸ åˆ›å»ºè”ç›Ÿ</div>
    <div class="item" onclick="alert('åŠ å…¥å…„å¼Ÿç›ŸæˆåŠŸï¼è”ç›Ÿæˆå‘˜ï¼š8äºº | æ¯æ—¥å¯é¢†è”ç›Ÿç¦åˆ©')">â• åŠ å…¥è”ç›Ÿ</div>
    <div class="item" onclick="alert('è”ç›Ÿç§‘æŠ€ï¼šèµ„æºäº§é‡+10% | æ”»å‡»+5%ï¼ˆéœ€è”ç›Ÿç­‰çº§2è§£é”ï¼‰')">ğŸ”¬ è”ç›Ÿç§‘æŠ€</div>
</div>

<!-- å…¨æœæ’è¡Œ -->
<div id="rankPage" class="page">
    <div class="info">ğŸ“Š å…¨æœè¯¸ä¾¯æ’è¡Œ</div>
    <div id="fullRank" style="max-height:300px;overflow-y:auto;"></div>
</div>

<script>
// 20ä¸ªäººæœºç©å®¶
let bots = [
    {name:"ä¹±ä¸–æ­é›„",level:5,atk:1200,def:900,money:8000},
    {name:"é“è¡€æˆ˜å°†",level:4,atk:1000,def:800,money:6000},
    {name:"çƒ½ç«è¯¸ä¾¯",level:6,atk:1500,def:1100,money:9000},
    {name:"æ±Ÿå±±ç¾äºº",level:3,atk:800,def:700,money:5000},
    {name:"å¤©ä¸‹å½’å¿ƒ",level:7,atk:1800,def:1400,money:12000},
    {name:"å¾æˆ˜å››æ–¹",level:5,atk:1300,def:1000,money:7500},
    {name:"ç‹è€…å½’æ¥",level:8,atk:2000,def:1600,money:15000},
    {name:"ç‹¬å­¤æ±‚è´¥",level:4,atk:950,def:750,money:6500},
    {name:"æ¨ªæ‰«åƒå†›",level:6,atk:1600,def:1200,money:10000},
    {name:"ä¸‡å¤«è«æ•Œ",level:7,atk:1900,def:1500,money:13000},
    {name:"è‹±é›„è±ªæ°",level:3,atk:850,def:720,money:5200},
    {name:"ç›–ä¸–è‹±é›„",level:5,atk:1250,def:950,money:8200},
    {name:"æ°”åå±±æ²³",level:4,atk:1050,def:850,money:6800},
    {name:"é¾™å•¸ä¹å¤©",level:6,atk:1550,def:1150,money:9500},
    {name:"è™è¸é¾™ç›˜",level:7,atk:1850,def:1450,money:12500},
    {name:"å‡¤é¸£å²å±±",level:5,atk:1350,def:1050,money:7800},
    {name:"é›„éœ¸å¤©ä¸‹",level:8,atk:2100,def:1700,money:16000},
    {name:"é€é¹¿ä¸­åŸ",level:4,atk:1000,def:800,money:6300},
    {name:"é—®é¼å¤©ä¸‹",level:6,atk:1650,def:1250,money:10500},
    {name:"æƒå€¾æœé‡",level:5,atk:1400,def:1100,money:8500}
];

// æ–°å·åˆå§‹æ•°æ®ï¼ˆä¼˜åŒ–ï¼šå¢åŠ å…µåŠ›ä¸Šé™éšç­‰çº§å˜åŒ–ï¼‰
let player = JSON.parse(localStorage.getItem("zfxNew")) || {
    name:"æ–°æ™‹ä¸»å…¬",
    level:1,
    exp:0,
    atk:500,
    def:400,
    bing:"100/100", // å½“å‰å…µåŠ›/æœ€å¤§å…µåŠ›
    food:2000,
    money:2000,
    power:100,
    city:"æ–°æ‰‹æ‘",
    hero:"å°å…µ",
    gong:0,
    robTarget:0
};

// åˆ·æ–°ç•Œé¢ï¼ˆæ ¸å¿ƒå‡½æ•°ï¼‰
function up(){
    // è®¡ç®—æœ€å¤§å…µåŠ›ï¼ˆéšç­‰çº§æå‡ï¼šç­‰çº§*100ï¼‰
    let maxBing = player.level * 100;
    let currBing = player.bing.split("/")[0] * 1;
    player.bing = `${Math.min(currBing, maxBing)}/${maxBing}`;

    // æ›´æ–°ç©å®¶ä¿¡æ¯
    document.getElementById("playerInfo").innerHTML = 
`<span class="bold red">${player.name}</span> Lv.${player.level}ï¼ˆä¸»å…¬ï¼‰<br>
å…µåŠ›ï¼š<span class="bold">${player.bing}</span>ï¼ˆç­‰çº§è¶Šé«˜ï¼Œå…µåŠ›ä¸Šé™è¶Šé«˜ï¼‰<br>
æ”»å‡»ï¼š<span class="bold">${player.atk}</span>  é˜²å¾¡ï¼š<span class="bold">${player.def}</span><br>
ç²®é£Ÿï¼š<span class="bold">${player.food}</span>  é“¶ä¸¤ï¼š<span class="bold">${player.money}</span><br>
ä½“åŠ›ï¼š<span class="bold ${player.power < 30 ? 'red' : ''}">${player.power}/100</span><br>
åŸæ± ï¼š<span class="bold">${player.city}</span> | ç´¯è®¡æˆ˜åŠŸï¼š${player.gong}`;

    // éšæœºæ å¤ºç›®æ ‡
    player.robTarget = Math.floor(Math.random()*bots.length);
    
    // æ’è¡Œï¼ˆæŒ‰ç­‰çº§é™åºï¼‰
    let rank = [...bots];
    rank.push(player);
    rank.sort((a,b)=>{
        // ä¼˜å…ˆæŒ‰ç­‰çº§ï¼Œç­‰çº§ç›¸åŒæŒ‰æ”»å‡»
        if(b.level !== a.level) return b.level - a.level;
        return b.atk - a.atk;
    });

    // å‰5æ’è¡Œ
    let rankHtml = "";
    for(let i=0;i<Math.min(5, rank.length);i++){
        let isSelf = rank[i].name === player.name;
        rankHtml += `${i+1}. <span class="${isSelf ? 'red bold' : ''}">${rank[i].name}</span> Lv.${rank[i].level}ï¼ˆæ”»å‡»ï¼š${rank[i].atk}ï¼‰<br>`;
    }
    document.getElementById("rankBox").innerHTML = 
`<span class="bold">ğŸ† è¯¸ä¾¯æ’è¡Œï¼ˆå‰5ï¼‰</span><br>${rankHtml}`;
    
    // å…¨æœæ’è¡Œ
    let full = "";
    rank.forEach((v,i)=>{
        let isSelf = v.name === player.name;
        full += `${i+1}. <span class="${isSelf ? 'red bold' : ''}">${v.name}</span> Lv.${v.level} | æ”»å‡»ï¼š${v.atk} | é“¶ä¸¤ï¼š${v.money || 0}<br>`;
    });
    document.getElementById("fullRank").innerHTML = full;
    
    // ä¿å­˜æ•°æ®åˆ°æœ¬åœ°
    localStorage.setItem("zfxNew",JSON.stringify(player));
}

// é¡µé¢åˆ‡æ¢
function showPage(id){
    document.querySelectorAll(".page").forEach(p=>p.classList.remove("show"));
    document.getElementById(id).classList.add("show");
    // åˆ‡æ¢é¡µé¢æ—¶æ›´æ–°å†›æƒ…æç¤º
    const tips = {
        main: "ç³»ç»Ÿï¼šä¸»åŸæ˜¯éœ¸ä¸šæ ¹åŸºï¼Œå…ˆå‡çº§ä¸»åŸæå‡å…µåŠ›ä¸Šé™ï¼",
        hero: "ç³»ç»Ÿï¼šæ­¦å°†æ˜¯å¾æˆ˜æ ¸å¿ƒï¼Œæ‹›å‹Ÿåå°†å¯å¤§å¹…æå‡æ”»å‡»ï¼",
        battle: "ç³»ç»Ÿï¼šæ”»åŸéœ€æ¶ˆè€—ä½“åŠ›ï¼Œä½“åŠ›ä¸è¶³å¯åœ¨ä¸»åŸæ¢å¤ï¼",
        rob: "ç³»ç»Ÿï¼šæ å¤ºå‰å…ˆä¾¦æŸ¥ï¼Œä¼˜å…ˆé€‰æ‹©é“¶ä¸¤å¤šçš„ç›®æ ‡ï¼",
        union: "ç³»ç»Ÿï¼šåŠ å…¥è”ç›Ÿå¯è·å¾—èµ„æºåŠ æˆï¼Œå¿«æ‰¾ä¸ªè”ç›Ÿå§ï¼",
        rankPage: "ç³»ç»Ÿï¼šåŠªåŠ›æå‡ç­‰çº§ï¼Œç™»ä¸Šå…¨æœæ¦œé¦–ï¼"
    };
    document.getElementById("military").innerHTML = tips[id] || tips.main;
}

// åŠŸèƒ½å‡½æ•° - ä¸»åŸ
function zhaobing(){
    if(player.food>=500){
        player.food -= 500;
        let [curr, max] = player.bing.split("/").map(Number);
        let newCurr = Math.min(curr + 50, max);
        player.bing = `${newCurr}/${max}`;
        alert(`âœ… å¾å…µæˆåŠŸï¼\nå…µåŠ›+50ï¼ˆå½“å‰ï¼š${newCurr}/${max}ï¼‰\nå‰©ä½™ç²®é£Ÿï¼š${player.food}`);
        up();
    }else alert("âŒ ç²®é£Ÿä¸è¶³ï¼å½“å‰ç²®é£Ÿï¼š"+player.food+"ï¼ˆéœ€è¦500ï¼‰");
}

function shengji(){
    if(player.money>=1000){
        player.money -= 1000;
        player.level += 1;
        player.atk += 100;
        player.def += 80;
        // å‡çº§åè‡ªåŠ¨æå‡å…µåŠ›ä¸Šé™
        let maxBing = player.level * 100;
        let currBing = player.bing.split("/")[0] * 1;
        player.bing = `${currBing}/${maxBing}`;
        alert(`ğŸ‰ ä¸»åŸå‡çº§æˆåŠŸï¼\nç­‰çº§+1ï¼ˆå½“å‰Lv.${player.level}ï¼‰\næ”»å‡»+100ï¼Œé˜²å¾¡+80\nå…µåŠ›ä¸Šé™æå‡è‡³${maxBing}`);
        up();
    }else alert("âŒ é“¶ä¸¤ä¸è¶³ï¼å½“å‰é“¶ä¸¤ï¼š"+player.money+"ï¼ˆéœ€è¦1000ï¼‰");
}

function lingqu(){
    player.food += 500;
    player.money += 300;
    alert(`ğŸ é¢†å–ç¦»çº¿èµ„æºæˆåŠŸï¼\nç²®é£Ÿ+500ï¼ˆå½“å‰ï¼š${player.food}ï¼‰\né“¶ä¸¤+300ï¼ˆå½“å‰ï¼š${player.money}ï¼‰`);
    up();
}

function huifu(){
    if(player.money>=100){
        player.money -= 100;
        player.power = 100;
        alert(`â¤ï¸ ä½“åŠ›æ¢å¤æˆåŠŸï¼\nä½“åŠ›å·²å›æ»¡ï¼ˆ100/100ï¼‰\nå‰©ä½™é“¶ä¸¤ï¼š${player.money}`);
        up();
    }else alert("âŒ é“¶ä¸¤ä¸è¶³ï¼å½“å‰é“¶ä¸¤ï¼š"+player.money+"ï¼ˆéœ€è¦100ï¼‰");
}

// åŠŸèƒ½å‡½æ•° - ç‚¹å°†å¤§å¸
function zhaomu(){
    if(player.money>=800){
        player.money -= 800;
        player.hero = "åå°†";
        player.atk += 200;
        alert(`ğŸ¯ æ‹›å‹Ÿæ­¦å°†æˆåŠŸï¼\nè§£é”æ­¦å°†ï¼šåå°†\næ”»å‡»+200ï¼ˆå½“å‰ï¼š${player.atk}ï¼‰\nå‰©ä½™é“¶ä¸¤ï¼š${player.money}`);
        up();
    }else alert("âŒ é“¶ä¸¤ä¸è¶³ï¼å½“å‰é“¶ä¸¤ï¼š"+player.money+"ï¼ˆéœ€è¦800ï¼‰");
}

function peiyang(){
    if(player.money>=500){
        player.money -= 500;
        player.atk += 150;
        alert(`âš¡ åŸ¹å…»æ­¦å°†æˆåŠŸï¼\næ”»å‡»+150ï¼ˆå½“å‰ï¼š${player.atk}ï¼‰\nå‰©ä½™é“¶ä¸¤ï¼š${player.money}`);
        up();
    }else alert("âŒ é“¶ä¸¤ä¸è¶³ï¼å½“å‰é“¶ä¸¤ï¼š"+player.money+"ï¼ˆéœ€è¦500ï¼‰");
}

// åŠŸèƒ½å‡½æ•° - å¾æˆ˜
function gongcheng(){
    if(player.power>=30){
        player.power -= 30;
        player.gong += 100; // æ–°æ‰‹ç¦åˆ©ï¼šåŒå€æˆ˜åŠŸ
        player.city = "å°åŸ";
        alert(`ğŸ´ æ”»æ‰“å°åŸæˆåŠŸï¼\nè§£é”åŸæ± ï¼šå°åŸ\næˆ˜åŠŸ+100ï¼ˆæ–°æ‰‹åŒå€ï¼‰\nå‰©ä½™ä½“åŠ›ï¼š${player.power}`);
        up();
    }else alert("âŒ ä½“åŠ›ä¸è¶³ï¼å½“å‰ä½“åŠ›ï¼š"+player.power+"ï¼ˆéœ€è¦30ï¼‰");
}

// åŠŸèƒ½å‡½æ•° - æ å¤º
function zhencha(){
    let b = bots[player.robTarget];
    let bing = b.level * 100;
    alert(`ğŸ” ä¾¦æŸ¥ç»“æœï¼š\nç›®æ ‡åç§°ï¼š${b.name}\nç­‰çº§ï¼šLv.${b.level}\næ”»å‡»ï¼š${b.atk} | é˜²å¾¡ï¼š${b.def}\né“¶ä¸¤ï¼š${b.money} | å…µåŠ›ï¼š${bing}`);
}

function duoluo(){
    if(player.power>=20){
        player.power -= 20;
        let b = bots[player.robTarget];
        let get = Math.floor(b.money * 0.3);
        player.money += get;
        player.gong += 10;
        document.getElementById("military").innerHTML = `ğŸ“¢ å†›æƒ…ï¼šä½ æ å¤ºäº†<span class="red">${b.name}</span>ï¼ŒæˆåŠŸè·å¾—${get}é“¶ä¸¤ï¼`;
        alert(`ğŸ´â€â˜ ï¸ æ å¤ºæˆåŠŸï¼\nç›®æ ‡ï¼š${b.name}\nè·å¾—é“¶ä¸¤ï¼š${get}ï¼ˆ30%ï¼‰\næˆ˜åŠŸ+10\nå‰©ä½™ä½“åŠ›ï¼š${player.power}`);
        up();
    }else alert("âŒ ä½“åŠ›ä¸è¶³ï¼å½“å‰ä½“åŠ›ï¼š"+player.power+"ï¼ˆéœ€è¦20ï¼‰");
}

// åŠŸèƒ½å‡½æ•° - èŠå¤©
function sendMsg(){
    let msg = prompt("ğŸ“ è¯·è¾“å…¥ä½ è¦å‘é€çš„å†…å®¹ï¼ˆæœ€å¤š20å­—ï¼‰ï¼š");
    if(msg && msg.trim() && msg.length <= 20){
        let time = new Date().toLocaleTimeString('zh-CN', {hour:'2-digit', minute:'2-digit'});
        document.getElementById("chatBox").innerHTML += 
`<div class="chat-item"><span class="time">[${time}]</span>-<span class="blue bold">${player.name}</span>ï¼š${msg.trim()}</div>`;
        // æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯
        let chatBox = document.getElementById("chatBox");
        chatBox.scrollTop = chatBox.scrollHeight;
    }else if(msg){
        alert("âŒ è¾“å…¥å†…å®¹ä¸èƒ½ä¸ºç©ºæˆ–è¶…è¿‡20å­—ï¼");
    }
}

// é‡ç½®æ¸¸æˆæ•°æ®
function resetGame(){
    if(confirm("âš ï¸ ç¡®å®šè¦é‡ç½®æ‰€æœ‰æ¸¸æˆæ•°æ®å—ï¼Ÿæ­¤æ“ä½œä¸å¯æ¢å¤ï¼")){
        localStorage.removeItem("zfxNew");
        alert("âœ… æ•°æ®é‡ç½®æˆåŠŸï¼é¡µé¢å°†åˆ·æ–°...");
        window.location.reload();
    }
}

// å¯åŠ¨æ¸¸æˆ
up();

// é¡µé¢åŠ è½½å®Œæˆåæç¤º
window.onload = function(){
    setTimeout(()=>{
        alert("ğŸ® æ¸¸æˆåŠ è½½å®Œæˆï¼\næ–°æ‰‹æ”»ç•¥ï¼š\n1. å…ˆé¢†å–ç¦»çº¿èµ„æºè·å¾—åˆå§‹é“¶ä¸¤\n2. å‡çº§ä¸»åŸæå‡å…µåŠ›å’Œå±æ€§\n3. æ‹›å‹Ÿæ­¦å°†å¢å¼ºæˆ˜æ–—åŠ›\n4. æ”»åŸ/æ å¤ºè·å–æ›´å¤šèµ„æº");
    }, 1000);
};
</script>
</body>
</html>